#!/usr/bin/env php
<?php

use Amp\Loop;
use Maestro\Dumper\GraphRenderer;
use Maestro\Extension\Maestro\MaestroExtension;
use Maestro\Loader\Manifest;
use Maestro\RunnerBuilder;
use Maestro\Task\Task\NullHandler;
use Maestro\Task\Task\NullTask;
use Maestro\Task\Task\PackageTask;
use Phpactor\Container\PhpactorContainer;
use Phpactor\Extension\Console\ConsoleExtension;
use Phpactor\Extension\Logger\LoggingExtension;
use Symfony\Component\Console\Application;

require __DIR__ . '/../vendor/autoload.php';

$container = PhpactorContainer::fromExtensions([
    ConsoleExtension::class,
    MaestroExtension::class,
    LoggingExtension::class,
], [
    LoggingExtension::PARAM_ENABLED => true,
    LoggingExtension::PARAM_LEVEL => 'debug',
]);

$application = new Application();
$application->setCommandLoader($container->get(ConsoleExtension::SERVICE_COMMAND_LOADER));
$application->run();
